<configuration>
    <interfaces xmlns="http://openconfig.net/yang/interfaces">
        <interface>
             <name>ae83</name>
             <config>
                 <name>ae83</name>
                 <type>ethernetCsmacd</type>
                 <enabled>true</enabled>
             </config>
             <subinterfaces>
                 <subinterface>
                     <index>4083</index>
					 <vlan xmlns="http://openconfig.net/yang/vlan">
					     <match>
					         <single-tagged>
					             <config>
					                 <vlan-id>4083</vlan-id>
					             </config>
					         </single-tagged>
					     </match>
					 </vlan>
                     <ipv4 xmlns="http://openconfig.net/yang/interfaces/ip">
                         <addresses>
                             <address>
                                 <ip>83.83.83.83</ip>
                                 <config>
                                      <prefix-length>24</prefix-length>
                                 </config>
                             </address>
                        </addresses>
                    </ipv4>
                </subinterface>
            </subinterfaces>
         </interface>
     </interfaces>
     <network-instances xmlns="http://openconfig.net/yang/network-instance">
		<network-instance>
			<name>openconfig-vrf</name>
			<config>
				<name>oc-vrf</name>
				<type xmlns:typeL3VRF="http://openconfig.net/yang/network-instance-types">typeL3VRF:L3VRF</type>
				<enabled>true</enabled>
				<router-id>1.1.0.9</router-id>
				<route-distinguisher>1.1.0.9:9999</route-distinguisher>
			</config>
			<inter-instance-policies>
				<apply-policy>
					<config>
						<import-policy>openconfig-vrf-import</import-policy>
						<export-policy>openconfig-vrf-export</export-policy>
					</config>
				</apply-policy>
			</inter-instance-policies>
			<interfaces>
				<interface>
					<id>ae83.4083</id>
						<config>
							<id>ae83.4083</id>
							<interface>ae83</interface>
							<subinterface>4083</subinterface>
						 </config>
				</interface>
			</interfaces>
			<protocols>
				<protocol>
					<identifier xmlns:identifierSTATIC="http://openconfig.net/yang/policy-types">identifierSTATIC:STATIC</identifier>
					<name>static-routes</name>
					<static-routes>
						<static>
							<prefix>3.3.3.0/24</prefix>
							<config>
								<prefix>3.3.3.0/24</prefix>
							</config>
							<next-hops>
								<next-hop>
									<index>83.83.83.1</index>
									<config>
										<next-hop>83.83.83.1</next-hop>
									</config>
								</next-hop>
							</next-hops>
						</static>
					</static-routes>
				</protocol>
			</protocols>
		</network-instance>
	</network-instances>
	<routing-policy xmlns="http://openconfig.net/yang/routing-policy">
		<defined-sets>
			<bgp-defined-sets xmlns="http://openconfig.net/yang/bgp-policy">
				<community-sets>
					<community-set>
						<community-set-name>openconfig-vrf-export-com</community-set-name>
						<config>
							<community-set-name>openconfig-vrf-export-com</community-set-name>
							<community-member>target:65100:9999</community-member>
						</config>
					</community-set>
					<community-set>
						<community-set-name>openconfig-vrf-import-com</community-set-name>
						<config>
							<community-set-name>openconfig-vrf-import-com</community-set-name>
							<community-member>target:65100:9999</community-member>
						</config>
					</community-set>
				</community-sets>
			</bgp-defined-sets>
		</defined-sets>
		<policy-definitions>
			<policy-definition>
				<name>openconfig-vrf-export</name>
				<config>
					<name>openconfig-vrf-export</name>
				</config>
				<statements>
					<statement>
						<name>term2</name>
						<conditions>
							<config>
								<install-protocol-eq xmlns:install-protocol-eqSTATIC="http://openconfig.net/yang/policy-types">install-protocol-eqSTATIC:STATIC</install-protocol-eq>
							</config>
						</conditions>
						<actions>
							<config>
								<policy-result>ACCEPT_ROUTE</policy-result>
							</config>
							<bgp-actions xmlns="http://openconfig.net/yang/bgp-policy">
								<set-community>
									<config>
										<options>ADD</options>
									</config>
									<reference>
										<config>
											<community-set-ref>openconfig-vrf-export-com</community-set-ref>
										</config>
									</reference>
								</set-community>
							</bgp-actions>
						</actions>
					</statement>
				</statements>
			</policy-definition>
		</policy-definitions>
	</routing-policy>
</configuration>
