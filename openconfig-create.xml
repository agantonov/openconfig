<configuration>
    <interfaces xmlns="http://openconfig.net/yang/interfaces">
        <interface>
             <name>lo0</name>
             <config>
                 <name>lo0</name>
                 <type>loopback</type>
                 <enabled>true</enabled>
             </config>
             <subinterfaces>
                 <subinterface>
                     <index>2</index>
                     <ipv4 xmlns="http://openconfig.net/yang/interfaces/ip">
                         <addresses>
                             <address>
                                 <ip>2.2.2.2</ip>
                                 <config>
                                      <prefix-length>32</prefix-length>
                                 </config>
                             </address>
                        </addresses>
                    </ipv4>
                </subinterface>
            </subinterfaces>
         </interface>
     </interfaces>
     <network-instances xmlns="http://openconfig.net/yang/network-instance">
		<network-instance>
			<name>openconfig-vrf</name>
			<config>
				<name>oc-vrf</name>
				<type xmlns:typeL3VRF="http://openconfig.net/yang/network-instance-types">typeL3VRF:L3VRF</type>
				<enabled>true</enabled>
				<router-id>1.1.0.9</router-id>
				<route-distinguisher>1.1.0.9:9999</route-distinguisher>
			</config>
			<inter-instance-policies>
				<apply-policy>
					<config>
						<import-policy>openconfig-vrf-import</import-policy>
						<export-policy>openconfig-vrf-export</export-policy>
					</config>
				</apply-policy>
			</inter-instance-policies>
			<interfaces>
				<interface>
					<id>lo0.2</id>
						<config>
							<id>lo0.2</id>
							<interface>lo0</interface>
							<subinterface>2</subinterface>
						 </config>
				</interface>
			</interfaces>
		</network-instance>
	</network-instances>
	<routing-policy xmlns="http://openconfig.net/yang/routing-policy">
		<defined-sets>
			<bgp-defined-sets xmlns="http://openconfig.net/yang/bgp-policy">
				<community-sets>
					<community-set>
						<community-set-name>openconfig-vrf-export-com</community-set-name>
						<config>
							<community-set-name>openconfig-vrf-export-com</community-set-name>
							<community-member>target:65100:9999</community-member>
						</config>
					</community-set>
					<community-set>
						<community-set-name>openconfig-vrf-import-com</community-set-name>
						<config>
							<community-set-name>openconfig-vrf-import-com</community-set-name>
							<community-member>target:65100:9999</community-member>
						</config>
					</community-set>
				</community-sets>
			</bgp-defined-sets>
		</defined-sets>
		<policy-definitions>
			<policy-definition>
				<name>openconfig-vrf-export</name>
				<config>
					<name>openconfig-vrf-export</name>
				</config>
				<statements>
					<statement>
						<name>term1</name>
						<conditions>
							<config>
								<install-protocol-eq xmlns:install-protocol-eqDIRECTLY_CONNECTED="http://openconfig.net/yang/policy-types">install-protocol-eqDIRECTLY_CONNECTED:DIRECTLY_CONNECTED</install-protocol-eq>
							</config>
						</conditions>
						<actions>
							<config>
								<policy-result>ACCEPT_ROUTE</policy-result>
							</config>
							<bgp-actions xmlns="http://openconfig.net/yang/bgp-policy">
								<set-community>
									<config>
										<options>ADD</options>
									</config>
									<reference>
										<config>
											<community-set-ref>openconfig-vrf-export-com</community-set-ref>
										</config>
									</reference>
								</set-community>
							</bgp-actions>
						</actions>
					</statement>
				</statements>
			</policy-definition>
			<policy-definition>
				<name>openconfig-vrf-import</name>
				<config>
					<name>openconfig-vrf-import</name>
				</config>
				<statements>
					<statement>
						<name>term1</name>
						<conditions>
							<bgp-conditions xmlns="http://openconfig.net/yang/bgp-policy">
								<config>
									<community-set>openconfig-vrf-import-com</community-set>
								</config>
							</bgp-conditions>
						</conditions>
						<actions>
							<config>
								<policy-result>ACCEPT_ROUTE</policy-result>
							</config>
						</actions>
					</statement>
				</statements>
			</policy-definition>
		</policy-definitions>
	</routing-policy>
</configuration>
